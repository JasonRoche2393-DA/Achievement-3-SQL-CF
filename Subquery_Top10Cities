SQL subquery to find the top 10 cities that fall within the top 10 countries.

SELECT country,
COUNT(cust.customer_id) AS count_of_customers
FROM customer AS cust
INNER JOIN address AS adr ON cust.address_id = adr.address_id
INNER JOIN city AS cty ON adr.city_id = cty.city_id
INNER JOIN country AS coun ON cty.country_id = coun.country_id
GROUP BY coun.country
ORDER BY count_of_customers DESC
LIMIT 10;

SELECT cty.city, coun.country,
COUNT(cust.customer_id) AS count_of_customers
FROM customer AS cust
INNER JOIN address AS adr ON cust.address_id = adr.address_id
INNER JOIN city AS cty ON adr.city_id = cty.city_id
INNER JOIN country AS coun ON cty.country_id = coun.country_id
WHERE coun.country IN ('India','China','United States','Japan','Mexico','Brazil','Russian Federation','Philippines','Turkey','Indonesia')
GROUP BY cty.city, coun.country
ORDER BY count_of_customers DESC
LIMIT 10
